    {% extends "base.html.twig" %}

    {% block body %}




<div class="jumbotron bg-dark">

    <h1 class="mb-md-3">Preston control panel</h1>

    <p class="mb-md-5">Welcome, {{ user.login }} !</p>

    <!-- Modal -->
    <div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <form class="formModal" style="font-family: 'Roboto', sans-serif !important;">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Reward</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="text" id="tags">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
        </form>
    </div>

    <table id="dtBasicExample" style="font-family: 'Roboto', sans-serif !important;" class="table table-borderless text-white col-md-12 col-lg-12" >
        <tbody class="table text-white">

        {% for u in userDatabase %}

            {% if u %}

            <tr class="bg-dark">
                <td>{{ u.id }}</td>
                <td class="username{{ u.id }}" name="{{ u.username }}">{{u.username}}</td>
                <td>{{u.realName}}</td>
                <td>{{u.email}}</td>
                {% if u.dataDeNascimento is null %}
                    <td>sem data de nascimento</td>
                {% else %}
                <td>{{ u.dataDeNascimento|date("d/m/Y") }}</td>
                {% endif %}
                <td>
                    {% for p in u.premios %}
                        {{ p }}
                    {% endfor %}
                    <a class="openModal{{ u.id }}" data-toggle="modal" data-target="#modelId" name="{{ u.id }}">
                        <i class="fas fa-plus-circle"></i>
                    </a>
                </td>
            </tr>
        {% endif %}
        {% endfor %}
        </tbody>

        <thead>

        </th>
        <th class="th-sm">Id

        </th>
        <th class="th-sm">Username

        </th>
        <th class="th-sm">Full name

        </th>
        <th class="th-sm">Email

        </th>
        <th class="th-sm">Birth date

        </th>
        <th class="th-sm">Rewards

        </th>
        </tr>
        </thead>
        <tfoot>
        <tr>
            <th>Id
            <th>Username
            </th>
            </th>
            <th>Full name
            </th>
            <th>Email
            </th>
            <th>Birth date
            </th>
            <th>Rewards
            </th>
        </tr>
        </tfoot>
    </table>

    <a href="{{ path('update_trello_database') }}">Update database</a>
    <a href="{{ path('create_access') }}">Create user access</a>

</div>
<style>

</style>
        <script>
            // Basic example
            $(document).ready(function () {
                $('#dtBasicExample').DataTable({
                    responsive : true,
                    "pagingType": "simple"
                });
                $('.dataTables_length').addClass('bs-select');

                {% for u in userDatabase %}
                {% if u %}
                $(document).on("click", ".openModal{{ u.id }}", function () {
                    var id = $(".openModal{{ u.id }}").attr("name");
                    console.log(id);
                    var nome = $(".username{{ u.id }}").attr("name");
                    $('.formModal').attr("name", id);
                    $('.modal-title').text("Reward " + nome);
                });
                {% endif %}
                {% endfor %}

            });


            var tagsdata=[]
            tagsdata.push({id:1,name:"Faça",screen:"faça"})
            tagsdata.push({id:2,name:"Crie",screen:"crie"})
            tagsdata.push({id:3,name:"Ouse",screen:"ouse"})
            tagsdata.push({id:4,name:"Conecte",screen:"conecte"})

            $("#tags").sTags({
                data:tagsdata,
                color:1
            })

        </script>
    {% endblock %}
